{"remainingRequest":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drewhyatt/projects/CandidateRank-Frontend/src/components/Admin-Dashboard/admin/setup/surveyManagement.vue?vue&type=style&index=0&id=96f87d10&scoped=true&lang=scss&","dependencies":[{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/src/components/Admin-Dashboard/admin/setup/surveyManagement.vue","mtime":1594691874791},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1vdmUgewogIGN1cnNvcjogbW92ZTsKfQojc3VydmV5LWxpc3QgewogIG1pbi1oZWlnaHQ6IDY1dmg7Cn0K"},{"version":3,"sources":["surveyManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8ZA;AACA;AACA;AACA;AACA;AACA","file":"surveyManagement.vue","sourceRoot":"src/components/Admin-Dashboard/admin/setup","sourcesContent":["<template>\n\t<div class=\"container-fluid\">  \n\t\t<b-row>\n      <b-col sm=\"9\">\n         <!-- <label class=\"tx-12 wt-600 dark-gray fw\">Choose Survey Setup:</label>\n         <b-form-group label=\"\" class=\"\">\n          <b-form-radio-group\n            v-model=\"selected\"\n            :options=\"options\"\n            name=\"radio-options\"\n          ></b-form-radio-group>\n        </b-form-group> -->\n          <label class=\"tx-12 wt-600 dark-gray fw\">Survey Management</label>\n         <b-button \n            class=\"mr-1 float-left\"\n            variant=\"success\"\n            size=\"sm\"\n            @click=\"newSurvey()\"\n            >Create New Survey\n          </b-button>\n      </b-col>\n      <b-col sm=\"3\">\n         <label class=\"tx-12 wt-600 dark-gray fw\">&nbsp;</label>\n         <b-button \n            class=\"mr-1 float-right\"\n            variant=\"primary\"\n            size=\"sm\"\n            @click=\"saveSurvey()\"\n            >Save & Contine\n          </b-button>\n      </b-col>\n      <b-col sm=\"12\"><hr /></b-col>\n\n       <b-col md=\"3\">\n          <label class=\"tx-12 wt-600 dark-gray fw\">Saved Surveys</label>\n          <b-list-group>\n            <b-list-group-item  v-for=\"(x, index) in surveys\" class=\"pointer\" @click=\"chooseHistorial(x)\">\n              <i class=\"fa fa-file dark-gray\"></i>\n              {{ x.name }}\n            </b-list-group-item>\n          </b-list-group>\n      </b-col>\n\n       <b-col sm=\"9\">\n        <b-card id=\"surveyPreview\" v-if=\"survey != null\">\n          <div>\n            <b-row>\n              <b-col sm=\"12\" class=\"\">\n              <h5>\n              {{ surveyType }} : {{ surveyName }}\n              <!-- <b-button size=\"sm\" variant=\"primary\" class=\"float-right mr-1 mt-1\">Test</b-button> -->\n              <!-- <b-button size=\"sm\" variant=\"success\" class=\"float-right mr-1 mt-1\">Activate</b-button> -->\n              <!-- <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\">Delete</b-button> -->\n              <!-- {{ survey.term }} -->\n              <!-- {{ survey.date_modified }} -->\n              </h5>\n              ___\n            </b-col>\n            <b-col sm=\"4\" class=\"\">\n                 <label class=\"tx-12 wt-600 dark-gray fw\">Add comments & questions:</label>\n                 <span class=\"mr-2 btn btn-sm btn-success\" @click=\"addQuestion()\">\n                    Add Question\n                  </span>\n                  <span class=\"mr-2 btn btn-sm btn-success\" @click=\"addComment()\">\n                    Add Comment\n                  </span>\n              </b-col>\n\n              <b-col sm=\"4\">\n                <label class=\"tx-12 wt-600 dark-gray fw\">Survey Type:</label>\n                <b-form-select v-model=\"surveyType\" :options=\"surveyTypes\"></b-form-select>\n              </b-col>\n\n              <b-col sm=\"4\">\n                 <label class=\"tx-12 wt-600 dark-gray fw\">Survey Name:</label>\n                  <b-form-input\n                    v-model=\"surveyName\"\n                    type=\"text\"\n                    placeholder=\"Enter Survey Name...\"\n                  ></b-form-input>\n              </b-col>\n\n            </b-row>\n\n          </div>\n          <hr />\n\n              <draggable\n                :list=\"questions\"\n                class=\"list-group\"\n                :move=\"checkMove\"\n                @start=\"dragging = true\"\n                @end=\"dragging = false\"\n              >\n                <div v-for=\"(x, index) in questions\" :key=\"index\"  class=\"list-group-item\">\n                  <i class=\"fa fa-bars move\"></i>\n                    <div v-if=\"x.type == 'Range'\">\n                       <p class=\"question-text mb-0 p-1 tx-12 wt-600\">Question: {{ x.text }}</p>\n                      <b-form-group>\n                        <b-form-input\n                          v-model=\"x.text\"\n                          type=\"text\"\n                          placeholder=\"...\"\n                        ></b-form-input>\n                      </b-form-group>\n                      <span v-for=\"(i, index) in x.options\" class=\"mr-2\">\n                        <input type=\"radio\" disabled>\n                        <label class=\"ml-2 mr-2\">{{ index }}</label>\n                      </span>\n                       <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\" @click=\"removeQuestion(x, index)\">Delete</b-button>\n                    </div>\n                    <div v-if=\"x.type == 'Comment'\">\n                      <p class=\"question-text mb-0 p-1 tx-12 wt-600\">Question: {{ x.question }}</p>\n                      <b-form-input\n                          v-model=\"x.question\"\n                          type=\"text\"\n                          placeholder=\"...\"\n                          class=\"mb-2\"\n                        ></b-form-input>\n                        <b-form-textarea\n                          :disabled=\"true\"\n                          v-model=\"x.text\"\n                          placeholder=\"Evaluator comments will go here...\"\n                          rows=\"3\"\n                          max-rows=\"6\"\n                        ></b-form-textarea>\n                        <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\" @click=\"removeQuestion(x, index)\">Delete</b-button>\n                    </div>\n                </div>\n              </draggable>\n        </b-card>\n      </b-col>\n\n\n\n      <!-- <b-col v-if=\"selected == 'new' \" sm=\"12\">\n        <div id=\"newSurvey\">\n          <b-row>\n            <b-col sm=\"12\">\n              <hr />\n              <draggable\n                :list=\"questions\"\n                class=\"list-group\"\n                :move=\"checkMove\"\n                @start=\"dragging = true\"\n                @end=\"dragging = false\"\n              >\n                <div v-for=\"(x, index) in questions\" :key=\"index\"  class=\"list-group-item\">\n                  <i class=\"fa fa-bars move\"></i>\n                    <div v-if=\"x.type == 'Range'\">\n                       <p class=\"question-text mb-0 p-1 tx-12 wt-600\">Question: {{ x.text }}</p>\n                      <b-form-group>\n                        <b-form-input\n                          v-model=\"x.text\"\n                          type=\"text\"\n                          placeholder=\"...\"\n                        ></b-form-input>\n                      </b-form-group>\n                      <span v-for=\"(i, index) in x.options\" class=\"mr-2\">\n                        <input type=\"radio\" disabled>\n                        <label class=\"ml-2 mr-2\">{{ index }}</label>\n                      </span>\n                       <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\" @click=\"removeQuestion(x, index)\">Delete</b-button>\n                    </div>\n                    <div v-if=\"x.type == 'Comment'\">\n                      <p class=\"question-text mb-0 p-1 tx-12 wt-600\">Question: {{ x.question }}</p>\n                      <b-form-input\n                          v-model=\"x.question\"\n                          type=\"text\"\n                          placeholder=\"...\"\n                          class=\"mb-2\"\n                        ></b-form-input>\n                        <b-form-textarea\n                          :disabled=\"true\"\n                          v-model=\"x.text\"\n                          placeholder=\"Evaluator comments will go here...\"\n                          rows=\"3\"\n                          max-rows=\"6\"\n                        ></b-form-textarea>\n                        <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\" @click=\"removeQuestion(x, index)\">Delete</b-button>\n                    </div>\n                </div>\n              </draggable>\n            </b-col>\n          </b-row>\n        </div>\n      </b-col> -->\n       <b-col v-if=\"selected == 'historical' \" sm=\"4\">\n       <!--  <b-card id=\"survey-list\">\n          <label class=\"tx-12 wt-600 dark-gray fw\">Saved Surveys</label>\n          <b-list-group>\n            <b-list-group-item  v-for=\"(x, index) in surveys\" class=\"pointer\" @click=\"chooseHistorial(x)\">\n              <i class=\"fa fa-file dark-gray\"></i>\n              {{ x.name }}\n            </b-list-group-item>\n          </b-list-group>\n        </b-card> -->\n      </b-col>\n      <!-- <b-col v-if=\"selected == 'historical' \" sm=\"8\">\n        <b-card id=\"surveyPreview\" v-if=\"survey != null\">\n          <h5>\n            {{ survey.type }} : {{ survey.name }}\n            <b-button size=\"sm\" variant=\"primary\" class=\"float-right mr-1 mt-1\">Test</b-button>\n            <b-button size=\"sm\" variant=\"success\" class=\"float-right mr-1 mt-1\">Activate</b-button>\n            <b-button size=\"sm\" variant=\"danger\" class=\"float-right mr-1 mt-1\">Delete</b-button>\n            {{ survey.term }}\n            {{ survey.date_modified }}\n          </h5>\n          <hr />\n           <div v-for=\"(x, index) in survey.questions\">\n            <div v-if=\"x.type == 'Range'\" class=\"mb-1\">\n              <p class=\"question-text mb-0 p-1 tx-12 wt-600\">{{ x.text }}</p>\n              <span v-for=\"(i, index) in x.options\" class=\"mr-2\">\n                <input type=\"radio\">\n                <label class=\"ml-2 mr-2\">{{ index }}</label>\n              </span>\n              <hr />\n            </div>\n            <div v-if=\"x.type == 'Comment'\" class=\"mb-1\">\n              <p class=\"question-text mb-0 p-1 tx-12 wt-600\">{{ x.question }}</p>\n                <b-form-textarea\n                  :disabled=\"false\"\n                  v-model=\"x.text\"\n                  placeholder=\"Evaluator comments will go here...\"\n                  rows=\"3\"\n                  max-rows=\"6\"\n                ></b-form-textarea>\n                <hr />\n            </div>\n          </div>\n        </b-card>\n      </b-col> -->\n    </b-row>\n\t</div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport draggable from \"vuedraggable\";\n// USE JS DATE FUNCTION TO GET ARRAY OF YEARS\nconst currentYear = (new Date()).getFullYear();\nconst range = (start, stop, step) => Array.from({ length: (stop - start) / step + 1}, (_, i) => start + (i * step))\nconst API_URL = process.env.VUE_APP_API_URL\n\nexport default {\n\tname: 'surveyManagement',\n  props: [\"organization\",\"user\",\"candidates\",\"surveys\",\"faculty\", \"currentTerm\"],\n  watch: {\n    surveys: function(newVal, oldVal) { \n       if(newVal) { \n        this.surveys = newVal\n       }\n    },\n    organization: function(newVal, oldVal) {\n      if(newVal) {\n        this.organization = newVal\n        let x\n        let terms = this.organization.terms\n        if(terms.length > 0) {\n          let yrs = []\n          for(x in terms) { yrs.push(terms[x].year) }\n          let max = yrs.reduce(function(a, b) {\n            return Math.max(a, b);\n          })\n          this.newestTerm = max\n        }\n        else {\n          this.newestTerm = (currentYear + 1)\n        }\n      }\n    }\n  },\n  order: 0,\n  components: {\n    draggable,\n    axios\n  },\n\tdata() {\n    \treturn {\n        enabled: true,\n        dragging: false,\n        surveyName: null,\n        surveyType: null,\n        surveyTerm: null,\n        surveyTerms: range(currentYear, currentYear - 50, -1),\n        surveyTypes : ['Pre-Interview', 'Interview', 'Candidate Post Interview Satisfaction'],\n        selected: null,\n        options: [\n          { text: 'Create New survey', value: 'new' },\n          { text: 'Historical Surveys', value: 'historical' },\n        ],\n        questions: [],\n        survey: null,\n      }\n  \t},\n  computed: {\n    priorYears() {\n        let x\n        let terms = this.organization.terms\n        let years = []\n        for(x in terms) { \n          years.push(terms[x].year) }\n        return years\n      },\n  },\n  methods: {\n    newSurvey() {\n      this.selected = 'new'\n      this.survey = {\n        Organization: this.organization,\n        date_created: null,\n        date_modified: null,\n        name: '',\n        questions: [],\n        term: this.currentTerm,\n        type: null,\n        uuid: null\n      }\n      this.surveyTerm = this.currentTerm\n      this.surveyType = null  \n      this.surveyName = ''\n      this.questions  = []\n    },\n    getSurveys() {},\n    add: function() {\n      this.list.push({ name: \"Juan \" + id, id: id++ });\n    },\n    replace: function() {\n      this.list = [{ name: \"Edgard\", id: id++ }];\n    },\n    checkMove: function(e) {\n      window.console.log(\"Future index: \" + e.draggedContext.futureIndex);\n    },\n    addQuestion() {\n      let x = {\n          type: 'Range',\n          text: '',\n          preview: false,\n          options: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n          selected: null,\n      }\n      this.questions.push(x)\n    },\n    addComment() {\n       let x = {\n          type: 'Comment',\n          text: '',\n          preview: false,\n          question: ''\n      }\n      this.survey.questions.push(x)\n    },\n    saveSurvey() {\n      \n      if(this.surveyName.length == 0 || this.surveyName == null) {\n        alert(\"Name the survey\")\n        return\n      }\n      if(this.surveyType == null) { \n        alert(\"Choose a survey type\")\n        return\n      }\n      else {\n        let input = {\n            Organization  : this.user.Organization,\n            term          : this.surveyTerm,  \n            type          : this.surveyType,  \n            name          : this.surveyName,\n            questions     : this.questions\n          }\n          console.log(input)\n        axios.post(API_URL+'/survey/add', input)\n          .then(({data}) => {\n            console.log(data)\n            this.surveys.push(data)\n            this.survey = {\n              \"Organization\"  : this.user.Organization,\n              \"term\"          : this.surveyTerm,  \n              \"type\"          : this.surveyType,  \n              \"name\"          : '',\n              \"questions\"     : []\n            }\n            let conf = confirm(this.surveyType + ': '  + this.surveyName + \" sucessfully saved and activated. Move on to next step.\")\n            this.questions = []\n            this.surveyName = null\n            if(conf) {\n              this.$emit('nextStep', this.currentTerm)\n            }\n          })\n          .catch(function (e) {\n            alert(e)\n            // alert(\"Error saving survey.\")\n          })\n      }\n    },\n    chooseHistorial(x) {\n      console.log(x)\n      this.survey = x\n      this.surveyTerm = x.term\n      this.surveyType = x.type  \n      this.surveyName = x.name\n      this.questions = x.questions\n    },\n    removeQuestion(q, index) {\n      // AXIOS API CALL TO DELETE THEN()\n      this.survey.questions.splice(index, 1)\n    },\n    moveQuestion(question, destination) {\n      console.log(question, destination)\n    }\n  }\n};\n</script>\n<style scoped lang=\"scss\">\n  .move {\n    cursor: move;\n  }\n  #survey-list {\n    min-height: 65vh;\n  }\n</style>"]}]}