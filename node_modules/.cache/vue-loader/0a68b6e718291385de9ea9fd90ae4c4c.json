{"remainingRequest":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drewhyatt/projects/CandidateRank-Frontend/src/components/Dashboard/admin/setup/welcomeWizard.vue?vue&type=style&index=0&id=069dfd72&scoped=true&lang=scss&","dependencies":[{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/src/components/Dashboard/admin/setup/welcomeWizard.vue","mtime":1587865690000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drewhyatt/projects/CandidateRank-Frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgogICNQcmVJbnRlcnZpZXdSYW5raW5ncyB0aCB7CiAgZm9udC1zaXplOiAxMHB4Owp9CiAjUHJlSW50ZXJ2aWV3UmFua2luZ3MgdGQgewogIGZvbnQtc2l6ZTogMTJweDsKICBwYWRkaW5nOiA1cHggMTVweCA1cHggMTVweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CiNQcmVJbnRlcnZpZXdSYW5raW5ncyB0ZDpudGgtY2hpbGQoMikgIHsKICBtYXgtd2lkdGg6IDIwMHB4OwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQovLyAudGQtaW50IHsKLy8gICAgbWF4LXdpZHRoOiA4MHB4OwovLyB9CiNQcmVJbnRlcnZpZXdSYW5raW5ncyB0ZDpsYXN0LWNoaWxkIHsKICAgd2lkdGg6IDMwMHB4Owp9Ci5wcm9maWxlLXNtIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgYm9yZGVyLXJhZGl1czogMTAwJTsKICBoZWlnaHQ6IDM1cHg7CiAgd2lkdGg6ICBhdXRvOwogIG1hcmdpbi1yaWdodDogMTBweDsKfQo="},{"version":3,"sources":["welcomeWizard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"welcomeWizard.vue","sourceRoot":"src/components/Dashboard/admin/setup","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <b-row no-gutters>\n      <b-col sm=\"12\">\n       <div :class=\"{'d-none' : selected != null}\" >\n          <label class=\"tx-18 wt-600 dark-gray\">Welcome to Canadidate Rank - Would you like to start a new application year or review prior years results?</label>\n          <br />\n            <b-button size=\"sm\" variant=\"primary\"  @click=\"newYear()\" class=\"mr-1\">Start New Year</b-button> \n            <b-button size=\"sm\" variant=\"secondary\"  @click=\"priorYear()\" class=\"mr-1\">Prior Year</b-button> \n        </div>\n      </b-col>\n      <div  :class=\"{'d-none' : selected != 'first'}\" class=\"fw\">\n        <b-row>\n          <b-col sm=\"2\">\n            <h5 class=\"pointer tx-18 wt-600 dark-gray\" @click=\"restartWizard('new')\">\n              <i class=\"fa fa-caret-left\"></i> Back\n            </h5>\n          </b-col>\n          <b-col sm=\"8\" class=\"text-center\">\n            <!-- <h5 class=\"tx-18 wt-600 dark-gray\">Setup {{ year }}</h5> -->\n          </b-col>\n\n          <b-col sm=\"2\" class=\"text-right\">\n            <b-button size=\"sm\" variant=\"primary\" @click=\"updateOrganization()\">Save Progress</b-button> \n          </b-col>\n\n          <b-col sm=\"12\"><hr /></b-col>\n\n           <b-col sm=\"6\">\n            <label class=\"tx-12 wt-600 dark-gray\">Choose Year:</label>\n            <b-form-select v-model=\"year\" :options=\"years\"></b-form-select>\n          </b-col>\n           <b-col sm=\"6\">\n              <label class=\"tx-12 wt-600 dark-gray\">Department Name:</label>\n              <b-input-group>\n                 <b-form-input v-model=\"departmentName\" placeholder=\"\"></b-form-input>\n                  <template v-slot:append>\n                      <b-button variant=\"primary\" @click=\"updateOrganization()\">Update</b-button>\n                    </template>\n              </b-input-group>\n          </b-col>\n          <!--  <b-col sm=\"3\">\n              <label class=\"tx-12 wt-600 dark-gray\">Deparment Logo:</label>\n              <b-form-group>\n                <input type=\"file\" ref=\"file\" style=\"display: none\"  @change=\"previewFiles\">\n                <b-button  block variant=\"secondary\" @click=\"$refs.file.click()\">Upload</b-button>\n              </b-form-group>\n          </b-col>\n           <b-col sm=\"3\">\n            <label class=\"tx-12 wt-600 dark-gray\">Current Logo:</label><br />\n            <img class=\"dpt-logo-preview\" src=\"dpt-logo.png\" />\n          </b-col> -->\n          <b-col sm=\"12\"><hr /></b-col>\n          <b-col sm=\"4\" class=\"text-center\">\n             <p>Now, choose your interview date(s)</p>\n               <b-calendar \n                id=\"interview-date-select\" \n                v-model=\"date\" \n                @context=\"onContext\" \n                locale=\"en-US\"\n                 selected-variant=\"success\" today-variant=\"info\"\n                ></b-calendar>\n          </b-col>\n          <b-col sm=\"4\">\n            <b-card style=\"min-height: 55vh;\">\n              <p>\n                Interview Dates\n                 <b-button size=\"sm\" variant=\"primary\" class=\"float-right\" @click=\"updateOrganization()\">Save Dates</b-button>\n                 <hr />\n              </p>\n              <span class=\"underbar bg-gray\"></span>\n              <p v-for=\"(x, index) in interviewDates\" class=\"date\">\n                {{ x.selectedFormatted }}\n\n                 <i\n                  @click=\"removeDate(x, index)\"\n                  v-b-tooltip.hover title=\"Remove Date\" \n                  class=\"fa fa-minus-circle pointer red float-right mr-2\">\n                </i>\n\n                 <i\n                  @click=\"removeDate(x, index)\"\n                  v-b-tooltip.hover title=\"Remove Date\" \n                  class=\"fa fa-lock pointer gray float-right mr-2\">\n                </i>\n\n              </p>\n            </b-card>\n          </b-col>\n          <b-col sm=\"4\">\n              <b-card style=\"min-height: 55vh;\">\n              <p>\n                Evaluators\n                <b-button size=\"sm\" variant=\"primary\" class=\"float-right\" v-b-modal.modal-1>Add User</b-button>\n                <b-modal id=\"modal-1\" title=\"Add New User\" no-footer>\n                  <label>email</label>\n                  <b-form-input v-model=\"newUser.email\" placeholder=\"email\"></b-form-input>\n                   <label>Temporary password:</label>\n                  <b-form-input v-model=\"newUser.password\" placeholder=\"password\"></b-form-input>\n                </b-modal>\n                <hr />\n              </p>\n               <span class=\"underbar bg-gray\"></span>\n              <p v-for=\"(x, index) in faculty\" class=\"date\">\n                  {{ x.email }}\n                 <i\n                  @click=\"removeSavedDate(x, index)\"\n                  v-b-tooltip.hover title=\"Delete User\" \n                  class=\"fa fa-minus-circle pointer red float-right mr-1\">\n                </i>\n                 <i\n                  @click=\"removeSavedDate(x, index)\"\n                  v-b-tooltip.hover title=\"Lock User\" \n                  class=\"fa fa-lock pointer gray float-right mr-1\">\n                </i>\n              </p>\n            </b-card>\n          </b-col>\n        </b-row>\n      </div>\n      <div :class=\"{'d-none' : selected != 'second'}\" class=\"fw\">\n        <b-row>\n          <b-col sm=\"6\">\n            <h5 class=\"pointer\" @click=\"restartWizard('prior')\">\n              <i class=\"fa fa-caret-left\"></i> Back\n            </h5>\n          </b-col>\n          <b-col sm=\"6\">\n            <h5 class=\"text-right\">\n              \n            </h5>\n          </b-col>\n          <b-col sm=\"12\"><hr /></b-col>\n          <b-col sm=\"7\">\n               <label class=\"tx-12 wt-600 dark-gray\">Search Candidates:</label>\n               <b-form-input v-model=\"text\" placeholder=\"Search Candidates\"></b-form-input>\n            </b-col>\n          <b-col sm=\"5\">\n              <label class=\"tx-12 wt-600 dark-gray\">Choose Year:</label>\n              <b-form-select v-model=\"year\" :options=\"priorYears\" @change=\"getCandidates(year)\"></b-form-select>\n          </b-col>\n          <b-col sm=\"12\">\n            <hr />\n            <table id=\"PreInterviewRankings\" class=\"table table-bordered table-hover\">\n             <thead>\n                <tr>\n                  <th v-for=\"(x, index) in fields\" scope=\"col\" @click=\"sort(index,  x.order)\">\n                    {{ x.name }} \n                      <i v-if=\" x.order == null\" class=\"fa fa-sort float-right gray\"></i>\n                      <i v-if=\" x.order == 'asc'\" class=\"fa fa-caret-up float-right\"></i>\n                      <i v-if=\" x.order == 'desc'\" class=\"fa fa-caret-down float-right\"></i>\n                  </th>\n                </tr>\n              </thead>\n               <tbody>\n                <tr v-for=\"(x, index) in candidates\">\n                    <td>{{ index }}</td>\n                    <td class=\"pointer wt-600\" @click=\"candidateDetails(x)\">\n                      <!-- <img class=\"profile-sm\" :src=\"x.picture\" /> -->\n                       {{ x['First Name'] }} {{ x['Last Name'] }}\n                    </td>\n                    <td>{{ x.interview.status }}</td>\n                    <td class=\"td-int\">{{ x.survey_1.status }}</td>\n                    <td class=\"td-int\">{{ x.survey_2.status }}</td>\n                    <td class=\"td-int\">\n                       <b-button size=\"sm\" variant=\"primary\" squared class=\"\">View</b-button>\n                    </td>\n                </tr>\n              </tbody>\n            </table>\n          </b-col>\n        </b-row>\n      </div>\n    </b-row>  \t\n  </div>\n</template>\n\n<script>\n// USE JS DATE FUNCTION TO GET ARRAY OF YEARS\nconst currentYear = (new Date()).getFullYear();\nconst range = (start, stop, step) => Array.from({ length: (stop - start) / step + 1}, (_, i) => start + (i * step));\nconst API_URL = process.env.VUE_APP_API_URL\n\nexport default {\n\tname: 'welcomeWizard',\n  props: [\"organization\",\"user\",\"candidates\",\"surveys\",\"faculty\"],\n  watch: {\n    organization: function(newVal, oldVal) {\n      if(newVal) {\n        this.organization = newVal\n        let x\n        let terms = this.organization.terms\n        if(terms.length > 0) {\n          let yrs = []\n          for(x in terms) { yrs.push(terms[x].year) }\n          let max = yrs.reduce(function(a, b) {\n            return Math.max(a, b);\n          })\n          this.newestTerm = max\n        }\n        else {\n          this.newestTerm = (currentYear + 1)\n        }\n      }\n    }\n  },\n\tdata() {\n    \treturn {\n        text: null,\n        newestTerm: null,\n        departmentName: '...',\n        newUser: {\n          email: null,\n          password: null,\n        },\n        selected: null,\n        options: [\n          { text: 'Start new year', value: 'first' },\n          { text: 'Review Prior year results', value: 'second' },\n        ],\n        year: currentYear,\n        years: range(currentYear + 1 , currentYear - 50, -1),\n        date: '',\n        interviewDates: [],\n        savedDates: [],\n        context: null,\n        fields : [\n          {\n             'name':'Rank',\n             'order': null,\n           },\n           {\n              'name' : 'Name', \n              'order': null,\n            },\n            {\n              'name': 'Interview',\n              'order': null,\n            },\n            {\n              'name':'Pre-Interview Survey',\n              'order': null,\n            },\n            {\n              'name':'Interview Survey', \n              'order': null,\n            },\n            {\n              'name':'Application',\n              'order': null,\n            }\n          ],\n      }\n  \t},\n    computed: {\n      newTerm() {\n        let x = {\n          \"year\"  : this.year,\n          \"dates\" : this.interviewDates,\n          \"name\"  : this.text \n        }\n        return x\n      },\n      priorYears() {\n        let x\n        let terms = this.organization.terms\n        let years = []\n        for(x in terms) { \n          years.push(terms[x].year) }\n        return years\n      },\n    },  \n  \tcomponents: {},\n    mounted() {},\n  \tmethods: { \n      updateYear(year) {\n        // AXIOS CALL GET ALL CANDIDATES FROM YEAR\n      },\n      newYear() {\n        this.selected = 'first'\n          let x\n          let terms = this.organization.terms\n          for(x in terms) {\n            if(terms[x].year == this.year) {\n              let c = confirm(\"You already have started setup for this year. Would you like to edit this year's setup?\")\n              if(c) {\n                this.selected = 'second'\n              }\n              else {\n                 // window.location.reload()\n                 this.selected = null\n              }\n            }\n            else {\n              // axios call to create a new term in an organization\n                // dates is an array in organization terms addDate(term)\n              this.selected = 'first'\n            }\n          }\n      },\n      priorYear() {\n        this.selected = 'second'\n        this.years = this.priorYears\n      },\n      updateOrganization() {\n        let save = confirm(\"Save My Progress\")\n        // CONFIRM ADMIN WANTS TO SAVE A NEW TERM\n        if(save) {\n          // IF ADMIN WANTS A NEW TERM CREATE THE TERM JSON-OBJECT\n            let term = {\n              year: this.year,\n              dates: this.interviewDates,\n              faculty: this.faculty,\n              department: this.departmentName\n          }\n          let x \n          // let terms = this.organization.terms\n          // let newTerm = false\n          // for(x in terms) {\n          //   if(terms[x].year == term.year) {\n          //     terms[x] = term\n          //   }\n          //   else {\n          //     newTerm = true\n          //     return newTerm\n          //   }\n          // }\n          // if(newTerm) {\n          //   // PUSH THE TERM TO THE ORGANIZATIONS TERMS ARRAY AND OUR VUE COMPONENTS / INTERFACE / LOCAL STORAGE\n          //   this.organization.terms.push(term)\n          // }\n            this.organization.terms.push(term)\n            // AXIOS UPDATE THE ORGANIZATION VIA API\n          window.axios.post(API_URL+'/organization/update/terms/'+this.organization.name, this.organization)\n            .then(({data}) => { \n              alert(\"Term setup saved successfully\")\n            })\n            .catch(function (e) { alert(e) })\n          }\n      },\n      previewFiles(event) {\n      },\n      uploadLogo() {},\n      restartWizard(type) {\n        if(type == 'prior') {\n          this.selected = null\n        }\n        else {\n          // CHECK IF ANY PROGRESS HAS BEEN MADE IN NEW TERM\n          // YEAR || DEPARTMENT NAME || DEPARTMENT LOGO || SELECTED DATES || SAVED DATES\n          let save = confirm(\"Save My Progress\")\n          if(save) {\n            // AXIOS UPDATE ORGANIZATION \n            alert(\"Progress Saved\")\n            this.selected = null\n          }\n          else {\n            this.selected = null\n          }\n        }\n      },\n      saveWizard() {\n        this.$refs['em'].activate()\n      },\n      // saveDate(x , index) {\n        // axios call to updateOrg(orgObject) \n        // this.savedDates.push(x)\n        // this.newTerm.dates.push(x)\n        // this.interviewDates.splice(index, 1)\n         // let x\n          // let dates = this.organization.terms\n          // for(x in terms) {\n          //   if terms[x]\n          // }\n\n          // window.axios.post('/api/survey/update', input)\n          //   .then(({data}) => {\n          //     this.surveys.push(data)\n          //   })\n          //   .catch(function (e) {\n          //     alert(e)\n          //     alert(\"Error saving survey.\")\n          //   })\n      // },\n      removeDate(x, index) {\n        this.interviewDates.splice(index, 1)\n      },\n      removeSavedDate(x, index) {\n        this.savedDates.splice(index, 1)\n      },\n      onContext(ctx) {\n        if(ctx.selectedDate == null) {\n          this.context = ctx\n        }\n        else {\n          this.context = ctx\n          this.interviewDates.push(ctx)\n        }\n      },\n       getCandidates(year) {\n          this.$Progress.start()\n          let org = this.user.Organization\n          window.axios.get(API_URL+'/candidate/all/'+org+'/'+year)\n          .then(({ data }) => {\n            let x \n            for(x in data) {\n              this.candidates.push(data[x])\n            }\n            this.$Progress.finish()\n          })\n          .catch(function (e) {\n              this.$Progress.fail()\n              alert('Error loading search candidates, please refresh.')\n          })\n      },\n    }\n};\n</script>\n<style scoped lang=\"scss\">\n    #PreInterviewRankings th {\n    font-size: 10px;\n  }\n   #PreInterviewRankings td {\n    font-size: 12px;\n    padding: 5px 15px 5px 15px;\n    vertical-align: middle;\n  }\n  #PreInterviewRankings td:nth-child(2)  {\n    max-width: 200px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  // .td-int {\n  //    max-width: 80px;\n  // }\n  #PreInterviewRankings td:last-child {\n     width: 300px;\n  }\n  .profile-sm {\n    display: inline-block;\n    border-radius: 100%;\n    height: 35px;\n    width:  auto;\n    margin-right: 10px;\n  }\n</style>"]}]}